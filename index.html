<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gráfico Doughnut Completo - Dark/Light/Móvil</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #fff; /* Light */
      color: #111827;
      transition: background-color 0.3s, color 0.3s;
    }
    canvas {
      width: 90%;
      max-width: 600px;
      height: auto;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background-color: #000; /* Dark */
        color: #e5e7eb;
      }
    }
  </style>
</head>
<body>
  <canvas id="miDoughnut"></canvas>
  <script>
    const isDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const textColor = isDark ? '#e5e7eb' : '#111827';
    const tooltipBg = isDark ? '#1f2937' : '#f3f4f6';
    const tooltipTitle = isDark ? '#facc15' : '#1f2937';
    const tooltipBody = isDark ? '#ffffff' : '#111827';
    const borderColor = isDark ? '#000' : '#fff';

    const ctx = document.getElementById('miDoughnut').getContext('2d');
    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Rojo', 'Azul', 'Amarillo', 'Verde', 'Morado'],
        datasets: [{
          label: 'Colores',
          data: [30, 50, 20, 40, 25],
          backgroundColor: ['#ef4444', '#3b82f6', '#facc15', '#10b981', '#8b5cf6'],
          borderColor: borderColor,
          borderWidth: 3,
          hoverOffset: 15,
          spacing: 5
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        cutout: '50%',
        rotation: -90,
        circumference: 360,
        plugins: {
          legend: {
            display: true,
            position: 'bottom',
            labels: {
              color: textColor,
              font: { size: 14, family: 'Arial', weight: 'bold' },
              padding: 20,
              boxWidth: 20,
              boxHeight: 20
            }
          },
          tooltip: {
            enabled: true,
            mode: 'nearest',
            intersect: true,
            backgroundColor: tooltipBg,
            titleColor: tooltipTitle,
            bodyColor: tooltipBody,
            borderColor: '#3b82f6',
            borderWidth: 1,
            padding: 10,
            callbacks: {
              title: ctx => 'Color: ' + ctx[0].label,
              label: ctx => 'Valor: ' + ctx.parsed + ' unidades'
            }
          },
          title: {
            display: true,
            text: 'Gráfico Doughnut Completo',
            color: textColor,
            font: { size: 20, weight: 'bold' },
            padding: { top: 10, bottom: 30 }
          },
          subtitle: {
            display: true,
            text: 'Soporte Dark/Light y Responsive',
            color: textColor,
            font: { size: 14 }
          }
        },
        layout: { padding: 10 },
        animation: {
          animateRotate: true,
          animateScale: true,
          duration: 1500,
          easing: 'easeOutBounce'
        },
        hover: { mode: 'nearest', animationDuration: 400 }
      }
    });
  </script>
</body>
</html>